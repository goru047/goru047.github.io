{% if include.post %}
  {% assign post = include.post %}
{% else %}
  {% assign post = post %}
{% endif %}

<article class="post-card">
  <a href="{{ post.url | relative_url }}" class="post-card-link">
    
    <!-- Card Image -->
    {% if post.featured_image %}
    <div class="card-image-wrapper">
      <img src="{{ post.featured_image | relative_url }}" alt="{{ post.title }}" class="card-image" loading="lazy">
    </div>
    {% else %}
    <div class="card-image-wrapper card-image-placeholder">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
        <circle cx="8.5" cy="8.5" r="1.5"/>
        <polyline points="21 15 16 10 5 21"/>
      </svg>
    </div>
    {% endif %}
    
    <!-- Card Content -->
    <div class="card-content">
      
      <!-- Card Meta -->
      <div class="card-meta">
        <time datetime="{{ post.date | date_to_xmlschema }}">
          {{ post.date | date: "%b %d, %Y" }}
        </time>
        {% if post.tags %}
          <span class="separator">â€¢</span>
          <span class="card-category">{{ post.tags | first }}</span>
        {% endif %}
      </div>
      
      <!-- Card Title -->
      <h3 class="card-title">{{ post.title }}</h3>
      
      <!-- Card Excerpt -->
      {% if post.excerpt %}
      <p class="card-excerpt">
        {{ post.excerpt | strip_html | truncatewords: 20 }}
      </p>
      {% endif %}
      
      <!-- Card Locations -->
      {% if post.countries or post.cities %}
      <div class="card-locations">
        <svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
        </svg>
        
        {% if post.countries %}
          {% for country in post.countries limit:2 %}
            <span class="location-badge">{{ country }}</span>
          {% endfor %}
        {% endif %}
        
        {% if post.cities %}
          {% for city in post.cities limit:2 %}
            <span class="location-badge">{{ city.name }}</span>
          {% endfor %}
        {% endif %}
        
        {% assign total_locations = post.countries.size | plus: post.cities.size %}
        {% if total_locations > 2 %}
          <span class="location-badge">+{{ total_locations | minus: 2 }}</span>
        {% endif %}
      </div>
      {% endif %}
      
      <!-- Card Tags -->
      {% if post.tags %}
      <div class="card-tags">
        {% for tag in post.tags limit:3 %}
          <span class="tag">{{ tag }}</span>
        {% endfor %}
      </div>
      {% endif %}
      
      <!-- Read More -->
      <div class="card-footer">
        <span class="read-more">
          Read More
          <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
          </svg>
        </span>
      </div>
      
    </div>
  </a>
</article>